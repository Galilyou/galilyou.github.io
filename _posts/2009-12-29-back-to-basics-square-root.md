---
layout: post
comments: true
permalink: "/blog/square-root-python"
title: 'Back to Basics: Square Root Implementation in Python'
date: '2009-12-29T17:54:00.000+02:00'
author: Galilyou
tags:
- square roots
- python
- math
modified_time: '2009-12-30T09:20:15.530+02:00'
---

<span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;">Two days ago a friend of mine who is a computer science student asked me about the simplest square root algorithm that I know about. Well, I know how pesky students suffer when trying to computer square roots, so I had to choose an easy one.</span></span><br /><br /><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/_CvP3b8RZYyc/SzogErc76NI/AAAAAAAAACU/RFaMtlWsO_g/s1600-h/445spongebobsquareroot.png" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><img border="0" src="http://2.bp.blogspot.com/_CvP3b8RZYyc/SzogErc76NI/AAAAAAAAACU/RFaMtlWsO_g/s320/445spongebobsquareroot.png" /></a><br /></div><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;"><br /></span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;"><br /></span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;">I know about the famous <a href="http://www.codemaestro.com/reviews/9">Cramack method</a>&nbsp;but this sounds complicated to me (though it's the most efficient method AFAIK). So I preferred the goody (Guess, Evaluate, Improve) method. So for example if I want to calculate the square root of the number let's say, 2, my strategy will be like the following:&nbsp;</span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;"><br /></span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;">1- Pick a guess (1 for example)</span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;">2- Evaluate that guess: is 1 * 1 <b><i>near enough</i></b> to 2 (see the bold near enough expression!)</span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;">3- If the guess is not near enough, Improve it.&nbsp;</span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;"><br /></span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;">Note that I didn't use the term "<b>equals</b>" when evaluating the expression, rather I used the term "<b>near enough</b>" and this is because, with numbers that are not full squares (like 2 for example), the square root is going to be a floating point number (square root of 2 =&nbsp;1.414213562373095). Now if you multiply this number --the square root of 2-- by itself, you should expect to have 2 as an answer. Well, that's not gonna happen, rather you're going to get (2.0000000000000004). This is happening due to the way that computers handle floating point numbers --which is a topic of other series of posts by itself. In this case if you used the term equals (or == operator) when evaluating the guess you will never make it, and your program will not halt. That's why I carefully used the term <b>near enough. </b>Defining what near enough means is your choice now, for certain situations you might consider a number that is less than the square root by 0.1 is near enough or 0.001 or 0.0001, etc. This depends on the level of precision that you need for your specific scenario.</span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;"><b><br /></b></span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;"><b>The implementation:&nbsp;</b></span></span><br /><span style="font-family: Arial; font-size: small;"><span style="font-size: 13px;">Here's a python implementation of this algorithm.</span></span><br /><span style="font-family: Arial; font-size: small;"></span><br /><span style="font-family: Arial; font-size: small;"></span><br /><span style="font-family: Arial; font-size: small;"></span><br /><span style="font-family: Arial; font-size: small;"></span><br /><span style="font-family: Arial; font-size: small;"></span><br /><span style="font-family: Arial; font-size: small;"></span><br /><span style="font-family: Arial; font-size: small;"></span><br /><span style="font-family: Arial; font-size: small;"><pre class="python" name="code">## calculates the square root of a positive number<br />## with the passed in precision<br />def sqrtWithPrecision(x, precision):<br />&nbsp;&nbsp; &nbsp;## The precision must be greater than zero,<br />&nbsp;&nbsp; &nbsp;## root must be a positive number<br />&nbsp;&nbsp; &nbsp;assert(precision &gt; 0, str(precision), 'is not a valid value, it must be a positive integer')<br />&nbsp;&nbsp; &nbsp;assert x &gt; 0, 'root can not be a negative number'<br />&nbsp;&nbsp; &nbsp;low = 0<br />&nbsp;&nbsp; &nbsp;high = max(x, 1)<br />&nbsp;&nbsp; &nbsp;counter = 0<br />&nbsp;&nbsp; &nbsp;guess= (low + high) /2.0<br />&nbsp;&nbsp; &nbsp;while abs (guess ** 2 -x) &gt; precision and counter &lt;= 100:<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;if(guess ** 2 &lt; x):<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;low = guess<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;else:<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;high = guess<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;guess = (low + high) / 2.0<br />&nbsp;&nbsp; &nbsp; &nbsp; &nbsp;counter += 1<br />&nbsp;&nbsp; &nbsp;assert counter &lt;= 100, '100 iterations done and no good answer'<br />&nbsp;&nbsp; &nbsp;## printing the number of iterations,<br />&nbsp;&nbsp; &nbsp;## in productive code, you might want to remove the next line<br />&nbsp;&nbsp; &nbsp;print 'Num of iterations:', counter, 'Estimate:', guess<br />&nbsp;&nbsp; &nbsp;return guess</pre><div><br />And here's a c# example:<br /><br /><pre class="csharp" name="code">float sqrtWithPrecision(float x, float precision)<br />        {<br />            if (x &lt; 0 || precision &lt;= 0)<br />                throw new ArgumentException("x, and precission gotta be non negative numbers");<br />            float low = 0;<br />            float high = Math.Max(1f, x);<br />            float guess = (low + high)/2f;<br />            int counter = 0;<br />            while( Math.Abs(guess * guess - x) &gt; precision &amp;&amp; counter &lt;= 100)<br />            {<br />                if (guess * guess &lt; x)<br />                    low = guess;<br />                else<br />                    high = guess;<br />                guess = (low + high)/2f;<br />                counter++;<br />            }<br />            if(counter &gt; 100)<br />                throw new Exception("100 iterations done with no good answer");<br />            Console.WriteLine("Num of Iterations: {0} , estimate: {1}", counter, guess);<br />            return guess;<br />        }</pre></div></span>